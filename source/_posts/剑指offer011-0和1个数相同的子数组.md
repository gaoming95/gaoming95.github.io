---
title: å‰‘æŒ‡offer011-0å’Œ1ä¸ªæ•°ç›¸åŒçš„å­æ•°ç»„
subtitle: å’Œ1ä¸ªæ•°ç›¸åŒçš„å­æ•°ç»„
date: 2020-01-01
author: é«˜æ˜
tags:
	- å‰‘æŒ‡offer
---



# å‰‘æŒ‡offer011-0å’Œ1ä¸ªæ•°ç›¸åŒçš„å­æ•°ç»„

## é¢˜ç›®

<p>ç»™å®šä¸€ä¸ªäºŒè¿›åˆ¶æ•°ç»„ <code>nums</code> , æ‰¾åˆ°å«æœ‰ç›¸åŒæ•°é‡çš„ <code>0</code> å’Œ <code>1</code> çš„æœ€é•¿è¿ç»­å­æ•°ç»„ï¼Œå¹¶è¿”å›è¯¥å­æ•°ç»„çš„é•¿åº¦ã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1:</strong></p>

<pre>
<strong>è¾“å…¥:</strong> nums = [0,1]
<strong>è¾“å‡º:</strong> 2
<strong>è¯´æ˜:</strong> [0, 1] æ˜¯å…·æœ‰ç›¸åŒæ•°é‡ 0 å’Œ 1 çš„æœ€é•¿è¿ç»­å­æ•°ç»„ã€‚</pre>

<p><strong>ç¤ºä¾‹ 2:</strong></p>

<pre>
<strong>è¾“å…¥:</strong> nums = [0,1,0]
<strong>è¾“å‡º:</strong> 2
<strong>è¯´æ˜:</strong> [0, 1] (æˆ– [1, 0]) æ˜¯å…·æœ‰ç›¸åŒæ•°é‡ 0 å’Œ 1 çš„æœ€é•¿è¿ç»­å­æ•°ç»„ã€‚</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul>
	<li><code>1 &lt;= nums.length &lt;= 10<sup>5</sup></code></li>
	<li><code>nums[i]</code> ä¸æ˜¯ <code>0</code> å°±æ˜¯ <code>1</code></li>
</ul>

<p>&nbsp;</p>

<p><meta charset="UTF-8" />æ³¨æ„ï¼šæœ¬é¢˜ä¸ä¸»ç«™ 525&nbsp;é¢˜ç›¸åŒï¼š&nbsp;<a href="https://leetcode-cn.com/problems/contiguous-array/">https://leetcode-cn.com/problems/contiguous-array/</a></p>
<div><div>Related Topics</div><div><li>æ•°ç»„</li><li>å“ˆå¸Œè¡¨</li><li>å‰ç¼€å’Œ</li></div></div><br><div><li>ğŸ‘ 20</li><li>ğŸ‘ 0</li></div>

## æ€è·¯

è¿™ä¸ªç”¨å‰ç¼€å’Œï¼Œè¿™ç§é¢˜ç›®å¯ä»¥æŠ½è±¡å‡ºä¸€ä¸ªæ¨¡æ¿ï¼Œä¸¤æ•°ä¹‹å·®

è¿˜æ˜¯å¦‚å‰‘æŒ‡`offer010`æ‰€æè¿°ï¼Œæˆ‘ä»¬å¯ä»¥ä¿å­˜ä¸€ä¸ªå‰ç¼€å’Œæ•°ç»„

æ¯”å¦‚`0,0,1,0,0,0,1,1`

åˆå§‹åŒ–æ•°ç»„`sum`ï¼Œ`sum[i]`è¡¨ç¤º`0~i-1`çš„å’Œ

å³

| 0    | 0    | 0    | 1    | 1    | 1    | 1    | 2    | 2    |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

æˆ‘ä»¬è€ƒè™‘arrçš„å­æ•°ç»„å¦‚ä½•æ»¡è¶³æ¡ä»¶ï¼Œå³å­æ•°ç»„0å’Œ1ä¸€ç›´æ ·å¤š

å¾ˆæ˜æ˜¾ï¼Œå¯¹äº`0,0,1,1`ï¼Œå¦‚æœè¦æ»¡è¶³0çš„ä¸ªæ•°å’Œ1çš„ä¸ªæ•°ä¸€æ ·å¤šï¼Œåªè¦æ»¡è¶³ `2*sum(0,0,1,1) = æ•°çš„ä¸ªæ•°` = 4

å³`2*(sum[j] - sum[i]) = j-(i+1)+1`

å› ä¸º`sum[j]`æ˜¯ `0-j`ï¼ŒåŒ…å«`j`

`sum[i]`æ˜¯`0-i`ï¼ŒåŒ…å«`i`

æ‰€ä»¥ `sum[j] - sum[i]` æ˜¯è®¡ç®—  `i+1 ~j`çš„å’Œï¼Œä»–ä»¬çš„è·ç¦»å°±æ˜¯ `j - (i+1) +1 = j - i`

å› æ­¤ï¼Œæ•´ä¸ªé—®é¢˜å°±å˜æˆäº†ä»æ•°ç»„`sum`ä¸­æ‰¾åˆ°ä¸¤ä¸ªæ•°æ»¡è¶³

`2 * (sum[j] - sum[i]) = j - i`

å˜å½¢ä¸€ä¸‹å°±å˜æˆ

`2sum[j] - j = 2sum[i] -i`

æ•´ä¸ªå½¢å¼æ¯”è¾ƒç‰¹æ®Šï¼Œæˆ‘ä»¬å…ˆæŒ‰ç…§ä¸€èˆ¬çš„ç†è§£ï¼Œ`2sum[j] - j -(2sum[i] -i) = 0`

æˆ‘ä»¬ä¸å¦¨æ¢å…ƒï¼Œå³`a =2sum[i] - i`,`b =2sum[j] - j`

ä¹Ÿå°±æ˜¯ `a-b = 0`

åˆå›åˆ°äº†ä¸¤æ•°ä¹‹å·®ç­‰äºå®šå€¼0

```java
for (int i = 0; i < sum.length; i++) {
    int a = 2 * sum[i] - i;
    int b = a - 0; // ä¸¤æ•°ä¹‹å·®
    if (map.containsKey(b)) {
        // å¦‚æœåŒ…å«b
    }
    // ä¸ç®¡æ€æ ·ï¼ŒæŠŠaæ”¾è¿›mapï¼Œè‡³äºvalueæŒ‰ç…§é¢˜ç›®çš„æ„æ€é€‰æ‹©
    map.put(a, ?);
}
```

åœ¨ç»“åˆé¢˜ç›®çš„æ„æ€ï¼Œæˆ‘ä»¬è¦æ±‚æœ€å¤§çš„èŒƒå›´ï¼Œä¹Ÿå°±æ˜¯å½“aè¿›å…¥mapçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦ä¿å­˜açš„indexï¼Œå½“aå†æ¬¡è¿›å…¥mapçš„æ—¶å€™ï¼Œæˆ‘ä»¬å–æœ€å°å€¼ï¼Œã€å®é™…ä¸Šä¸éœ€è¦æ“ä½œï¼Œå› ä¸ºå‰é¢açš„indexè‚¯å®šå°äºåé¢ã€‘

```java
Map<Integer, Integer> map = new HashMap<>();
int count = Integer.MIN_VALUE;
int m = Integer.MAX_VALUE;
for (int i = 0; i < sum.length; i++) {
    int a = 2 * sum[i] - i;
    int b = a;
    if (map.containsKey(b)) {
        count = Math.max(i - map.get(b), count);
    }
    map.put(a, Math.min(i, map.getOrDefault(a, m))); // è¿™è¾¹ä¿å­˜indexçš„æœ€å°å€¼ï¼Œå³æœŸæœ› j-i å–å¾—æœ€å¤§å€¼
}
return count == Integer.MIN_VALUE ? 0: count;
```

ã€å®é™…ä¸Šä¸éœ€è¦æ“ä½œï¼Œå› ä¸ºå‰é¢açš„indexè‚¯å®šå°äºåé¢ã€‘

```java
class Solution {
    public int findMaxLength(int[] nums) {
        int[] sum = new int[nums.length + 1];
        for (int i = 1; i < sum.length; i++) {
            sum[i] = sum[i - 1] + nums[i - 1];
        }
        Map<Integer, Integer> map = new HashMap<>();
        int count = Integer.MIN_VALUE;
        for (int i = 0; i < sum.length; i++) {
            int a = 2 * sum[i] - i;
            if (map.containsKey(a)) {
                count = Math.max(i - map.get(a), count);
            }else{
                map.put(a, i);
            }

        }
        return count == Integer.MIN_VALUE ? 0: count;
    }
}
```